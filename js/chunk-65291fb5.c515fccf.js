(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65291fb5"],{"0084":function(t,e,i){"use strict";function a(){var t=JSON.parse(localStorage.getItem("URL")),e="127.0.0.1",i="127.0.0.1",a="127.0.0.1",n="127.0.0.1",o="127.0.0.1",s=t&&t.accURL?t.accURL:"http://".concat(e,":10115"),r=t&&t.pnlURL?t.pnlURL:"http://".concat(e,":8028"),l=t&&t.listURL?t.listURL:"http://".concat(a,":8020"),c=t&&t.wsURL?t.wsURL:"ws://".concat(e,":10115/ws/"),d=t&&t.selectedURL?t.selectedURL:"http://".concat(i,":8022"),u=t&&t.indicatorURL?t.indicatorURL:"http://".concat(e,":8030"),p=t&&t.backtestURL?t.backtestURL:"http://127.0.0.1:8010",h=t&&t.innerURL?t.innerURL:"http://".concat(n,":8028"),f=t&&t.financialURL?t.financialURL:"http://".concat(o,":8018"),m=t&&t.groupURL?t.groupURL:"http://".concat(o,":8018"),g=t&&t.orderURL?t.orderURL:"http://".concat(o,":8018"),b=t&&t.klineURL?t.klineURL:"http://".concat(e,":8029"),k=t&&t.cashURL?t.cashURL:"http://".concat(o,":8020"),L=t&&t.backtestqifiURL?t.backtestqifiURL:"http://".concat(n,":8019"),R=t&&t.varietiesURL?t.varietiesURL:"http://".concat(o,":8018");return{accURL:s,pnlURL:r,listURL:l,wsURL:c,selectedURL:d,indicatorURL:u,backtestURL:p,innerURL:h,financialURL:f,groupURL:m,orderURL:g,klineURL:b,cashURL:k,backtestqifiURL:L,varietiesURL:R}}i.d(e,"a",(function(){return a}))},"5e89":function(t,e,i){var a=i("861d"),n=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&n(t)===t}},"70f4":function(t,e,i){},7466:function(t,e,i){"use strict";var a=i("a395"),n=i.n(a);n.a},8692:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"backtestChart",staticClass:"backtestChart"},[i("div",{ref:"klineCard",staticClass:"kline"},[i("div",{staticClass:"account card"},[i("span",[t._v("当前账户: "+t._s(t.params.account_cookie))])]),i("div",{staticClass:"chart card"},[i("kline",{ref:"kline",attrs:{chartSize:t.chartSize}})],1)]),i("div",{staticClass:"trade"},[i("div",{staticClass:"signal card"},[i("div",{staticClass:"serachBox"},[i("el-input",{attrs:{placeholder:"请输入代码"},on:{input:t.serach},model:{value:t.serachCode,callback:function(e){t.serachCode="string"===typeof e?e.trim():e},expression:"serachCode"}})],1),i("vxe-table",{style:{width:t.tabWidth},attrs:{data:t.serachSignalData,height:t.scrollHeight,border:"",round:"","highlight-current-row":"","keyboard-config":{isArrow:!0},"sort-config":{trigger:"cell"},"auto-resize":""},on:{"cell-click":t.detailRowClick},scopedSlots:t._u([{key:"empty",fn:function(){return[i("span",[i("img",{attrs:{src:"https://xuliangzhan_admin.gitee.io/vxe-table/static/other/img2.gif"}}),i("p",[t._v("不是吧！这就没数据了")])])]},proxy:!0}])},[i("vxe-table-column",{attrs:{field:"code",title:"代码"}}),i("vxe-table-column",{attrs:{field:"if_buyopen",title:"方向"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:1==e.row.if_buyopen?"profit":"loss"},[t._v(t._s(1==e.row.if_buyopen?"买":"卖"))])]}}])}),i("vxe-table-column",{attrs:{field:"openprice",sortable:"",title:"开仓价格","min-width":"18px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.openprice)))])]}}])}),i("vxe-table-column",{attrs:{field:"closeprice",sortable:"",title:"平仓价格","min-width":"18px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.closeprice)))])]}}])}),i("vxe-table-column",{attrs:{field:"amount",sortable:"",title:"手数"}}),i("vxe-table-column",{attrs:{field:"pnl_money",sortable:"",title:"赢亏"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:e.row.pnl_money>0?"redColor":"greenColor"},[t._v(t._s(t._f("toFixed")(e.row.pnl_money)))])]}}])}),i("vxe-table-column",{attrs:{field:"pnl_ratio",sortable:"",title:"盈利率"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.pnl_ratio)))])]}}])}),i("vxe-table-column",{attrs:{field:"opendate",sortable:"",title:"开仓日期","min-width":"52px"}}),i("vxe-table-column",{attrs:{field:"closedate",sortable:"",title:"平仓日期","min-width":"52px"}}),i("vxe-table-column",{attrs:{field:"hold_gap",sortable:"",title:"持仓时间","min-width":"18px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("filterSecond")(e.row.hold_gap)))])]}}])})],1)],1)]),i("div",{staticClass:"fix"},[i("el-button",{attrs:{type:"warning",icon:"el-icon-star-off",circle:""},on:{click:t.change}})],1)])},n=[],o=(i("4de4"),i("c740"),i("caad"),i("a15b"),i("fb6a"),i("a9e3"),i("8ba4"),i("b680"),i("d3b7"),i("e25e"),i("25f0"),i("2532"),i("1276"),i("0084")),s=i("c276"),r=i("f094"),l=i("f950"),c={data:function(){return{currentPage:1,pageSize:50,total:0,innerURL:"",klineURL:"",durationTime:{},params:{},token:"",userInfo:"",symbol:"",tabWidth:"",joinTime:"",getIndex:0,chartSize:{},signalData:[],serachAllSignalData:[],serachSignalData:[],scrollHeight:"0px",serachCode:"",dotData:{type:"dot",data:[]},line:{type:"line",data:[{Color:"rgb(255,0,0)",BGColor:"rgba(255,0,0,0.5)",Point:[]}]},polygon:{type:"polygon",data:[{Color:"rgba(52,46,37,0)",BGColor:"rgba(255,0,0,0.5)",Point:[]}]},area:{type:"area",data:[{Start:{Date:20200220,Time:null},End:{Date:20200318,Time:null},Color:"rgba(250,128,144,0.5)"}]},ops:{vuescroll:{mode:"native"},scrollPanel:{},rail:{background:"#01a99a",opacity:0,size:"10px",specifyBorderRadius:!1,gutterOfEnds:null,gutterOfSide:"0px",keepShow:!0,border:"none"},bar:{keepShow:!0,hoverStyle:!0,onlyShowBarOnScroll:!0,background:"#ccc"}}}},components:{kline:r["default"]},mounted:function(){this.innerURL=Object(o["a"])().innerURL,this.klineURL=Object(o["a"])().klineURL,this.token=s["a"].cookies.get("token"),this.userInfo=s["a"].cookies.get("userInfo"),this.getTradePairAllData(),this.setKlineChartSize(),this.monitor()},filters:{toFixed:function(t){return Number.isInteger(t)?t:t.toFixed(2)},filterTime:function(t){var e=parseInt(t/864e5),i=parseInt(t%864e5/36e5),a=parseInt(t%36e5/6e4),n=t%6e4/1e3,o=e+"d"+i+"h"+a+"m"+n+"s";return o},filterSecond:function(t){var e=parseInt(t/86400),i=parseInt(t%86400/3600),a=parseInt(t%3600/60),n=t%60,o=e+"d"+i+"h"+a+"m"+n+"s";return o}},methods:{monitor:function(){var t=this;this.$erd.listenTo(this.$refs.backtestChart,(function(e){var i=e.offsetWidth*(4/7)-30,a=e.offsetHeight-60;t.$refs.kline.OnSize(i,a),t.scrollHeight=e.offsetHeight-70+"px",t.tabWidth=e.offsetWidth*(3/7)-10+"px"}))},setKlineChartSize:function(){this.chartSize.width=this.$refs.klineCard.offsetWidth,this.chartSize.height=.7*this.$refs.klineCard.offsetHeight},serach:function(){var t=this;this.serachSignalData=this.signalData.filter((function(e){return e["code"].includes(t.serachCode)}))},detailRowClick:function(t){var e=t.row;this.getIndex=e.index,this.setURL(e),this.saveDot(e)},saveDot:function(t){var e=t["opendate"].split(" ")[0].split("-").join(""),i=t["opendate"].split(" ")[1].split(":").join("").slice(0,4),a=t["closedate"].split(" ")[0].split("-").join(""),n=t["closedate"].split(" ")[1].split(":").join("").slice(0,4),o=t.pnl_money>0?"rgba(255,0,0,0.1)":"rgba(0,255,0,0.1)",s=t.pnl_money>0?"rgba(255,0,0,0.9)":"rgba(0,255,0,0.9)";this.dotData.data=[{Date:e,Time:i,Value:t["openprice"],Symbol:"buy",Color:"rgb(240,0,0)",Baseline:2},{Date:a,Time:n,Value:t["closeprice"],Symbol:"sell",Color:"rgb(0,240,0)",Baseline:1}],this.line.data[0].Color=s,this.line.data[0].Point=[{Date:e,Time:i,Value:t["openprice"]},{Date:a,Time:n,Value:t["closeprice"]}],this.polygon.data[0].Color=o,this.polygon.data[0].BGColor=o,this.polygon.data[0].Point=[{Date:e,Time:i,Value:t["openprice"]},{Date:a,Time:n,Value:t["openprice"]},{Date:a,Time:n,Value:t["closeprice"]},{Date:e,Time:i,Value:t["closeprice"]}],this.area.data=[{Start:{Date:e,Time:i},End:{Date:a,Time:n},Color:o}],this.$refs.kline.jumpTime=e;var r=[this.dotData,this.line,this.polygon,this.area];sessionStorage.setItem("draw",JSON.stringify(r)),this.$refs.kline.recreate()},getTradePairAllData:function(){var t=this;this.params=this.getParams(),this.$http.post(this.innerURL+"/qaaccount/get_qifihis_pnl",{user_cookie:this.token,account_cookie:this.params.account_cookie,portfolio_cookie:this.params.portfolio_cookie},{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),t.signalData=e,t.serachSignalData=t.signalData.slice(0),t.setURL(e[0]),t.saveDot(e[0])}))},getParams:function(){var t=window.location.href.split("?")[1],e=t.split("&"),i={};for(var a in e)i[e[a].split("=")[0]]=e[a].split("=")[1];return i},setDuration:function(t,e){var i=t.split(" ")[0].split("-").join(""),a=e.split(" ")[0].split("-").join(""),n=l["a"].findIndex((function(t){return t===Number(i)})),o=l["a"].findIndex((function(t){return t===Number(a)})),s="",r="";this.params.frequence.includes("min")?(s=l["a"][n-1].toString(),r=l["a"][o+1].toString()):(s=l["a"][n-25].toString(),r=l["a"][o+25].toString()),s=[s.slice(0,4),s.slice(4,6),s.slice(6,8)].join("-"),r=[r.slice(0,4),r.slice(4,6),r.slice(6,8)].join("-"),this.durationTime.start=s,this.durationTime.end=r},setURL:function(t){this.setDuration(t.opendate,t.closedate),"day"===this.params.frequence?this.$refs.kline.KLine.Option.KLine.Period=0:this.$refs.kline.KLine.Option.KLine.Period=4;var e=this.klineURL+"/testk?code="+t["code"]+"&frequence="+this.params.frequence+"&start="+this.durationTime.start+"&end="+this.durationTime.end+"&market="+this.params.market+"&raw=false";this.$refs.kline.hold_gap=t["hold_gap"],this.$refs.kline.frequence=this.params.frequence,this.$refs.kline.URL=e,this.$refs.kline.isRequest=!0},change:function(){var t=document.getElementsByClassName("kline")[0],e=document.getElementsByClassName("trade")[0];t.style.order=2!==Number(t.style.order)?2:1,e.style.order=1!==Number(e.style.order)?1:2}}},d=c,u=(i("c8e9"),i("7466"),i("2877")),p=Object(u["a"])(d,a,n,!1,null,"49bb6dfb",null);e["default"]=p.exports},"8ba4":function(t,e,i){var a=i("23e7"),n=i("5e89");a({target:"Number",stat:!0},{isInteger:n})},a395:function(t,e,i){},c8e9:function(t,e,i){"use strict";var a=i("70f4"),n=i.n(a);n.a}}]);